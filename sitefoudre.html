<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Défi : Foudre</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

body{
  background:black;
  color:white;
  font-family:'Press Start 2P', monospace;
  margin:0;
  padding:0;
  text-align:center;
  overflow:hidden;
}

/* Effet scan TV */
body::after{
  content:"";
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background: repeating-linear-gradient(
    0deg,
    rgba(255,255,255,0.05),
    rgba(255,255,255,0.05) 1px,
    transparent 1px,
    transparent 3px
  );
  pointer-events:none;
}

h1{ margin-top:20px; font-size:16px;}

#game-container{
  margin-top:20px;
  position:relative;
}

#cameras{
  display:flex;
  justify-content:space-around;
  flex-wrap:wrap;
  max-width:600px;
  margin:20px auto;
}

.camera{
  width:120px;
  height:160px;
  border:3px solid white;
  margin:5px;
  position:relative;
  cursor:pointer;
  background:black;
  overflow:hidden;
}

/* PERSONNAGE BINAIRE */
.animatronique{
  width:100%;
  height:100%;
  position:absolute;
  top:0;
  left:0;
  display:none;
  background:black;
  color:white;
  font-size:4px;
  line-height:4px;
  white-space:pre;
  font-family:monospace;
  overflow:hidden;
  animation:glitch 0.2s infinite;
}

@keyframes glitch{
  0%{ transform:translate(0,0);}
  25%{ transform:translate(1px,-1px);}
  50%{ transform:translate(-1px,1px);}
  75%{ transform:translate(1px,1px);}
  100%{ transform:translate(0,0);}
}

/* Flash réussite */
.flash{
  animation:flashEffect 0.2s;
}

@keyframes flashEffect{
  0%{ background:white; color:black;}
  100%{ background:black; color:white;}
}

#counter{ font-size:16px; margin-top:10px;}

#letterS{
  font-size:100px;
  margin-top:30px;
  display:none;
  animation:blink 1s infinite;
}

@keyframes blink{
  0%{opacity:1;}
  50%{opacity:0;}
  100%{opacity:1;}
}

.message{
  position:absolute;
  font-size:16px;
  font-weight:bold;
  pointer-events:none;
  animation:fadeOut 1s forwards;
}

.message.success{ color:yellow;}
.message.fail{ color:red;}

@keyframes fadeOut{
  0%{opacity:1;}
  100%{opacity:0; top:0;}
}
</style>
</head>

<body>

<h1>Clique sur le signal lorsqu'il apparaît !</h1>

<div id="game-container">

  <div id="cameras">

    <!-- 4 caméras -->
    <div class="camera" data-id="0"><div class="animatronique">
11111111111111111111111111111
11111111111111111111111111111
11111111111111111111111111111
11111111111111111111111111111
11111111111111111111111111111
11111111111111111111111111111
11111111111111111111111111111
11111000000000000000000111111
11111000000000000000000111111
11100000000000000000000001111
11100000000000000000000001111
11100000000000000000000001111
11100000000000000000000001111
11100111100000011110000001111
11100111100000011110000001111
11100111100000011110000001111
11100111100000011110000001111
11100111100000011110000001111
11100111100000011110000001111
11100000000000000000000001111
11100000000000000000000001111
11100000000000000000000001111
11100000000000000000000001111
11100000000000000000000001111
11100000000000000000000001111
11100000000000000000000001111
11100000000000000000000001111
11100000000000000000000001111
11100000000000000000000001111
11100000000000000000000001111
11100000000000000000000001111
11111000000000000000000111111
11111000000000000000000111111
11111110000000000000011111111
11111110000000000000011111111
11111111111111111111111111111
11111111111111111111111111111
11111111111111111111111111111
11111111111111111111111111111
11111111111111111111111111111
    </div></div>

    <div class="camera" data-id="1"><div class="animatronique">SAME</div></div>
    <div class="camera" data-id="2"><div class="animatronique">SAME</div></div>
    <div class="camera" data-id="3"><div class="animatronique">SAME</div></div>

  </div>

  <div id="counter">Succès : 0 / 10</div>
  <div id="letterS">S</div>

</div>

<script>
const cameras = document.querySelectorAll('.camera');
const gameContainer = document.getElementById('game-container');
let currentId = -1;
let success = 0;
const maxSuccess = 10;
const counter = document.getElementById('counter');
const letterS = document.getElementById('letterS');
const failMessages = ["raté","trop guez","fait un effort","bro plz","encore raté"];

function hideAll(){
  cameras.forEach(c=>{
    c.querySelector('.animatronique').style.display='none';
  });
}

function spawnAnimatronic(){
  hideAll();
  currentId = Math.floor(Math.random()*cameras.length);
  const anim = cameras[currentId].querySelector('.animatronique');
  anim.style.display='block';
  anim.classList.add('flash');
  setTimeout(()=>{ anim.classList.remove('flash'); },200);
  setTimeout(()=>{
    anim.style.display='none';
    currentId=-1;
  },1200);
}

function shakeSite(){
  gameContainer.style.transform='translateX(-5px)';
  setTimeout(()=>{ gameContainer.style.transform='translateX(5px)'; },50);
  setTimeout(()=>{ gameContainer.style.transform='translateX(-5px)'; },100);
  setTimeout(()=>{ gameContainer.style.transform='translateX(5px)'; },150);
  setTimeout(()=>{ gameContainer.style.transform='translateX(0)'; },200);
}

function showMessage(text,type){
  const msg=document.createElement('div');
  msg.className='message '+type;
  msg.textContent=text;
  msg.style.left=Math.random()*(window.innerWidth-100)+'px';
  msg.style.top=Math.random()*(window.innerHeight-50)+'px';
  document.body.appendChild(msg);
  setTimeout(()=>{document.body.removeChild(msg);},1000);
}

cameras.forEach(cam=>{
  cam.addEventListener('click',()=>{
    const id=parseInt(cam.dataset.id);
    if(id===currentId){
      success++;
      counter.textContent=`Succès : ${success} / ${maxSuccess}`;
      showMessage("+1 point","success");
      shakeSite();
      if(success>=maxSuccess){
        letterS.style.display='block';
        hideAll();
        showMessage("Bravo ! Lettre S débloquée !","success");
      } else {
        spawnAnimatronic();
      }
    } else {
      success=Math.max(0,success-1);
      counter.textContent=`Succès : ${success} / ${maxSuccess}`;
      const failMsg=failMessages[Math.floor(Math.random()*failMessages.length)];
      showMessage(failMsg,"fail");
    }
  });
});

spawnAnimatronic();
setInterval(()=>{
  if(success<maxSuccess){
    spawnAnimatronic();
  }
},1500);
</script>

</body>
</html>
