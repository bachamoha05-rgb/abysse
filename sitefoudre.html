<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Défi : Foudre</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

body{
  background:black;
  color:white;
  font-family:'Press Start 2P', monospace;
  margin:0;
  padding:0;
  text-align:center;
  overflow:hidden;
}

h1{
  margin-top:20px;
  font-size:16px;
}

#game-container{
  margin-top:20px;
  position:relative;
}

/* Effet scan léger */
body::after{
  content:"";
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:repeating-linear-gradient(
    0deg,
    rgba(255,255,255,0.03),
    rgba(255,255,255,0.03) 1px,
    transparent 1px,
    transparent 3px
  );
  pointer-events:none;
}

#cameras{
  display:flex;
  justify-content:space-around;
  flex-wrap:wrap;
  max-width:600px;
  margin:20px auto;
}

.camera{
  width:120px;
  height:160px;
  border:3px solid white;
  margin:5px;
  position:relative;
  cursor:pointer;
  background:black;
  overflow:hidden;
}

/* PERSONNAGE BINAIRE */
.animatronique{
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  display:none;
  background:black;
  color:white;
  font-family:monospace;
  font-size:4px;
  line-height:4px;
  white-space:pre;
  user-select:none;
  animation:glitch 0.15s infinite;
}

@keyframes glitch{
  0%{ transform:translate(0,0);}
  50%{ transform:translate(1px,-1px);}
  100%{ transform:translate(0,0);}
}

#counter{
  font-size:16px;
  margin-top:10px;
}

#letterS{
  font-size:100px;
  margin-top:30px;
  display:none;
  animation:blink 1s infinite;
}

@keyframes blink{
  0%{opacity:1;}
  50%{opacity:0;}
  100%{opacity:1;}
}

.message{
  position:absolute;
  font-size:16px;
  font-weight:bold;
  pointer-events:none;
  animation:fadeOut 1s forwards;
}

.message.success{ color:yellow;}
.message.fail{ color:red;}

@keyframes fadeOut{
  0%{opacity:1;}
  100%{opacity:0; top:0;}
}
</style>
</head>

<body>

<h1>Clique sur le signal lorsqu'il apparaît !</h1>

<div id="game-container">

<div id="cameras">

<!-- Caméra 0 -->
<div class="camera" data-id="0">
<div class="animatronique">
111111111111000001111111
111111111110000000111111
111111111110000000111111
111111111111001000111111
111111111111001000111111
111111111110000000111111
111111111110000000111111
111111111111000000011111
111111111111000001001111
111111111111111111001111
111111111111111111000001
111111111111111111000001
111111111111111111011000
111111111111111111011000
111111111111111100010000
111111111111111100000000
111111111111111100000000
111111101111110000000000
111110001111000001000000
000000100000000011000000
111111111111111111000001
111111111111111111000001
111111111111111111100001
111111111111111111100001
111111111111111111100001
111111111111111111100001
111111111111111111100001
111111111111111111100001
111111111111111111100001
111111111111111111100001
111111111111111111110011
111111111111111111110011
111111111111111111110011
111111111111111111110011
111111111111111111110011
111111111111111111110011
111111111111111111110011
111111111111111111110011
111111111111111110000011
111111111111111110000011
</div>
</div>

<!-- Caméras 1,2,3 -->
<div class="camera" data-id="1"><div class="animatronique"></div></div>
<div class="camera" data-id="2"><div class="animatronique"></div></div>
<div class="camera" data-id="3"><div class="animatronique"></div></div>

</div>

<div id="counter">Succès : 0 / 10</div>
<div id="letterS">S</div>

</div>

<script>
const cameras = document.querySelectorAll('.camera');
const binaryArt = cameras[0].querySelector('.animatronique').innerHTML;

/* Copier le perso dans les autres caméras */
for(let i=1;i<cameras.length;i++){
  cameras[i].querySelector('.animatronique').innerHTML = binaryArt;
}

let currentId=-1;
let success=0;
const maxSuccess=10;
const counter=document.getElementById('counter');
const letterS=document.getElementById('letterS');
const failMessages=["raté","trop guez","fait un effort","bro plz","encore raté"];

function hideAll(){
  cameras.forEach(c=>{
    c.querySelector('.animatronique').style.display='none';
  });
}

function spawn(){
  hideAll();
  currentId=Math.floor(Math.random()*cameras.length);
  const anim=cameras[currentId].querySelector('.animatronique');
  anim.style.display='block';
  setTimeout(()=>{
    anim.style.display='none';
    currentId=-1;
  },1200);
}

function showMessage(text,type){
  const msg=document.createElement('div');
  msg.className='message '+type;
  msg.textContent=text;
  msg.style.left=Math.random()*(window.innerWidth-100)+'px';
  msg.style.top=Math.random()*(window.innerHeight-50)+'px';
  document.body.appendChild(msg);
  setTimeout(()=>{document.body.removeChild(msg);},1000);
}

cameras.forEach(cam=>{
  cam.addEventListener('click',()=>{
    const id=parseInt(cam.dataset.id);
    if(id===currentId){
      success++;
      counter.textContent=`Succès : ${success} / ${maxSuccess}`;
      showMessage("+1 point","success");
      if(success>=maxSuccess){
        letterS.style.display='block';
        hideAll();
        showMessage("Bravo ! Lettre S débloquée !","success");
      } else{
        spawn();
      }
    } else{
      success=Math.max(0,success-1);
      counter.textContent=`Succès : ${success} / ${maxSuccess}`;
      const failMsg=failMessages[Math.floor(Math.random()*failMessages.length)];
      showMessage(failMsg,"fail");
    }
  });
});

spawn();
setInterval(()=>{
  if(success<maxSuccess){
    spawn();
  }
},1500);
</script>

</body>
</html>
