<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Défi : Eau</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
body {
    background:black;
    color:white;
    font-family:'Press Start 2P',monospace;
    text-align:center;
    margin:0;
    padding:0;
}
.box {
    border:6px solid white;
    width:90%;
    max-width:600px;
    margin:40px auto;
    padding:20px;
}
#text {
    font-size:14px;
    line-height:1.8em;
    text-align:left;
    min-height:300px;
}
h3 { margin-top:20px; font-size:14px; }
input {
    background:black;
    color:white;
    border:3px solid white;
    padding:14px;
    font-family:'Press Start 2P',monospace;
    font-size:16px;
    width:90%;
    margin-top:20px;
    box-sizing:border-box;
}
button {
    margin-top:20px;
    padding:16px 24px;
    font-family:'Press Start 2P',monospace;
    font-size:16px;
    background:black;
    color:white;
    border:3px solid white;
    cursor:pointer;
}
button:hover { background:white;color:black; }
#result {
    margin-top:40px;
    font-size:120px;
    display:none;
    animation:blink 1s infinite;
}
@keyframes blink { 0% {opacity:1;} 50% {opacity:0;} 100% {opacity:1;} }
#error { margin-top:20px; color:red; font-size:14px; }
</style>
</head>
<body>
<div class="box">
<div id="text"></div>
<h3>À qui s'adresse le message ?</h3>
<input type="text" id="answer" placeholder="Tape ta réponse...">
<br>
<button onclick="checkAnswer()">VALIDER</button>
<div id="error"></div>
<div id="result">I</div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script>
const firebaseConfig = {
  apiKey: "AIzaSyCLUNQhx8h0dHmiI3rqJ6QPuDju0Aa4zAo",
  authDomain: "trailer-90acb.firebaseapp.com",
  databaseURL: "https://trailer-90acb-default-rtdb.firebaseio.com",
  projectId: "trailer-90acb",
  storageBucket: "trailer-90acb.firebasestorage.app",
  messagingSenderId: "216077694665",
  appId: "1:216077694665:web:e6090a278b656f7d2f7f18"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const fullText = `Bonjour? Boonnjouuur? Heuu, j'ai voulu enregistrer un message pour vous, pour vous aider à vous mettre à l'aise durant votre première nuit. Hummmm, j'ai en réalité travaillé dans ce bureau avant vous. Je finis ma dernière semaine de travail en fait...
Je sais que cela peut être un peu accablant, mais je suis ici pour vous dire que vous n'avez rien à craindre. Heuuu, tout va bien se passer. Maintenant... concentrons nous pour vous aider à aller au bout de votre première semaine. Ok?
Heu, donc, premièrement nous avons une lettre de bienvenue et d'introduction de l'entreprise que je suis censé lire. Heuu, c'est une sorte de paperasse légale, vous savez. "Bienvenue chez Freddy Fazbear's Pizza : un endroit magique pour enfants et adultes, là où la fantaisie et le plaisir prennent vie. Fazbear Entertainment n'est pas responsable des dégâts de propriété ou individus. Dans le cas d'une blessure ou de la mort d'un individu, un rapport de personne disparu sera déposé dans les 90 jours au plus tard ou aussitôt que les locaux auront été nettoyés à fond et les tapis remplacés."
Bla, bla, bla, sur le coup, ceci peut avoir un mauvais air, mais je vous assure qu'il n'y a pas de quoi s'inquiéter. Heu, les animatroniques sont un peu bizarres pendant la nuit mais est-ce que je dois les disputer ? Non. Si j'étais forcé de chanter encore et encore ces stupides chansons pendant 20 ans sans jamais avoir de bain? Je serais sûrement irritable durant la nuit aussi. Donc n'oubliez pas, ces personnages occupent une place dans le cœur des enfants, donc nous pouvons leur montrer un peu de respect, pas vrai? Ok.
Bien soyez averti: les dits-personnages ont tendance à errer un peu partout dans le restaurant. Heu, ils ont une sorte de « mode itinérance-libre » qui s'active durant la nuit. Heuuu... Quelque chose dans leur système se bloque lorsqu'ils sont trop longtemps en inactivité. Heuu, ils pouvaient se déplacer aussi pendant la journée. Puis s'est produit la Morsure de 87. Ouais. C-C'est incroyable que le corps humain puisse vivre sans son lobe frontal, n'est ce pas ?
Euh, maintenant concernant votre sécurité : le seul "vrai" risque que vous courez en tant que gardien de nuit ici, dans le cas échéant, sont les animatroniques, heuuu, s'ils vous aperçoivent après les heures d'ouverture, ils ne vous reconnaîtront pas en tant qu'une personne. Ils-Ils vous verront surtout comme un endosquelette sans son costume. Étant donné que c'est contre les règles de Freddy Fazbear's Pizza, ils essayeront probablement de... de vous enfoncer avec force dans un costume de Freddy Fazbear. Hummm, ça ne serait pas si problématique si les costumes eux mêmes n'étaient pas remplis de poutrelles métalliques, de fils électriques et d'autres pièces animatroniques, plus particulièrement au niveau du visage. Donc, imaginez ce que pourrais être l'expérience de se faire enfoncer la tête dans l'un de ces costumes, cela pourrait créer un sensation d'inconfort... et la mort. Heuu, les seuls parties qui verront la lumière du jour serait vos yeux et vos dents qui seraient éjectés du masque, ouais. O-Ouais, ils ne vous informent pas de ce genre de chose lorsque vous postulez. Mais hey, le premier jour n'est qu'une petite brise, je vais communiquer avec vous demain, heuu, regardez les caméras, et ne fermez les portes qu'en cas de stricte nécessitée, pour conserver l'électricité. Bien, c'est tout pour ce soir et bonne nuit !`;

const textElement = document.getElementById("text");
let index = 0;
function typeWriter() {
  if(index<fullText.length){
    textElement.innerHTML += fullText.charAt(index);
    index++;
    setTimeout(typeWriter,15);
  }
}
typeWriter();

function checkAnswer(){
  const answer = document.getElementById("answer").value.trim().toLowerCase();
  const result = document.getElementById("result");
  const error = document.getElementById("error");
  if(answer==="à un gardien de nuit"||answer==="gardien de nuit"||answer==="un gardien de nuit"){
    result.style.display="block";
    error.textContent="";
    db.ref("lettres/I").set(true);
  }else{
    result.style.display="none";
    error.textContent="... Mauvaise réponse.";
  }
}
</script>
</body>
</html>
